<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>COCO &mdash; Datumaro Documentation 0.2.2 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="ICDAR" href="icdar.html" />
    <link rel="prev" title="Cityscapes" href="cityscapes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #30638E" >
  <a href="../../index.html" class="icon"> Datumaro Documentation
</a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Datumaro Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_manual.html">Developer manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="formats.html">Formats</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ade20k2017.html">ADE20k (v2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ade20k2020.html">ADE20k (v2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="align_celeba.html">Align CelebA</a></li>
<li class="toctree-l2"><a class="reference internal" href="celeba.html">CelebA</a></li>
<li class="toctree-l2"><a class="reference internal" href="cifar.html">CIFAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="cityscapes.html">Cityscapes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">COCO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#format-specification">Format specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-coco-dataset">Import COCO dataset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-to-other-formats">Export to other formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-to-coco">Export to COCO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-1-how-to-load-an-original-panoptic-coco-dataset-and-convert-to-pascal-voc">Example 1. How to load an original panoptic COCO dataset and convert to Pascal VOC</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-2-how-to-create-custom-coco-like-dataset">Example 2. How to create custom COCO-like dataset</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="icdar.html">ICDAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_zip.html">Image zip</a></li>
<li class="toctree-l2"><a class="reference internal" href="imagenet.html">ImageNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="kitti.html">KITTI</a></li>
<li class="toctree-l2"><a class="reference internal" href="kitti_raw.html">Velodyne Points / KITTI Raw 3D</a></li>
<li class="toctree-l2"><a class="reference internal" href="lfw.html">LFW</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapillary_vistas.html">Mapillary Vistas</a></li>
<li class="toctree-l2"><a class="reference internal" href="market1501.html">Market-1501</a></li>
<li class="toctree-l2"><a class="reference internal" href="mars.html">MARS</a></li>
<li class="toctree-l2"><a class="reference internal" href="mnist.html">MNIST</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpii.html">MPII Human Pose Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpii_json.html">MPII Human Pose Dataset (JSON)</a></li>
<li class="toctree-l2"><a class="reference internal" href="open_images.html">Open Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="pascal_voc.html">Pascal VOC</a></li>
<li class="toctree-l2"><a class="reference internal" href="sly_pointcloud.html">Supervisely Point Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthia.html">SYNTHIA</a></li>
<li class="toctree-l2"><a class="reference internal" href="vgg_face2.html">Vgg Face2 CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="vott_csv.html">VoTT CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="vott_json.html">VoTT JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html">Format specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html#import-wider-face-dataset">Import WIDER Face dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html#export-wider-face-dataset">Export WIDER Face dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html#export-to-wider-face-dataset">Export to WIDER Face dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="yolo.html">YOLO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/cli/cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/components/components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/plugins/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/util/util/util.html">Utilities</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #30638E" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Datumaro Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="formats.html">Formats</a> &raquo;</li>
      <li>COCO</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/formats/coco.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="coco">
<h1>COCO<a class="headerlink" href="#coco" title="Permalink to this headline"></a></h1>
<section id="format-specification">
<h2>Format specification<a class="headerlink" href="#format-specification" title="Permalink to this headline"></a></h2>
<p>COCO format specification is available <a class="reference external" href="https://cocodataset.org/#format-data">here</a>.</p>
<p>The dataset has annotations for multiple tasks. Each task has its own format
in Datumaro, and there is also a combined <code class="docutils literal notranslate"><span class="pre">coco</span></code> format, which includes all
the available tasks. The sub-formats have the same options as the “main”
format and only limit the set of annotation files they work with. To work with
multiple formats, use the corresponding option of the <code class="docutils literal notranslate"><span class="pre">coco</span></code> format.</p>
<p>Supported tasks / formats:</p>
<ul class="simple">
<li><p>The combined format - <code class="docutils literal notranslate"><span class="pre">coco</span></code></p></li>
<li><p><a class="reference external" href="https://cocodataset.org/#captions-2015">Image Captioning</a> - <code class="docutils literal notranslate"><span class="pre">coco_caption</span></code></p></li>
<li><p><a class="reference external" href="https://cocodataset.org/#detection-2020">Object Detection</a> - <code class="docutils literal notranslate"><span class="pre">coco_instances</span></code></p></li>
<li><p><a class="reference external" href="https://cocodataset.org/#panoptic-2020">Panoptic Segmentation</a> - <code class="docutils literal notranslate"><span class="pre">coco_panoptic</span></code></p></li>
<li><p><a class="reference external" href="https://cocodataset.org/#keypoints-2020">Keypoint Detection</a> - <code class="docutils literal notranslate"><span class="pre">coco_person_keypoints</span></code></p></li>
<li><p><a class="reference external" href="https://cocodataset.org/#stuff-2019">Stuff Segmentation</a> - <code class="docutils literal notranslate"><span class="pre">coco_stuff</span></code></p></li>
<li><p>Image Info - <code class="docutils literal notranslate"><span class="pre">coco_image_info</span></code></p></li>
<li><p>Image classification (Datumaro extension) - <code class="docutils literal notranslate"><span class="pre">coco_labels</span></code>. The format is like
Object Detection, but uses only <code class="docutils literal notranslate"><span class="pre">category_id</span></code> and <code class="docutils literal notranslate"><span class="pre">score</span></code> annotation fields.</p></li>
</ul>
<p>Supported annotation types (depending on the task):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Caption</span></code> (captions)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Label</span></code> (label, Datumaro extension)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Bbox</span></code> (instances, person keypoints)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Polygon</span></code> (instances, person keypoints)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mask</span></code> (instances, person keypoints, panoptic, stuff)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Points</span></code> (person keypoints)</p></li>
</ul>
<p>Supported annotation attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">is_crowd</span></code> (boolean; on <code class="docutils literal notranslate"><span class="pre">bbox</span></code>, <code class="docutils literal notranslate"><span class="pre">polygon</span></code> and <code class="docutils literal notranslate"><span class="pre">mask</span></code> annotations) - Indicates
that the annotation covers multiple instances of the same class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">score</span></code> (number; range [0; 1]) - Indicates the confidence in this
annotation. Ground truth annotations always have 1.</p></li>
<li><p>arbitrary attributes (string/number) - A Datumaro extension. Stored
in the <code class="docutils literal notranslate"><span class="pre">attributes</span></code> section of the annotation descriptor.</p></li>
</ul>
</section>
<section id="import-coco-dataset">
<h2>Import COCO dataset<a class="headerlink" href="#import-coco-dataset" title="Permalink to this headline"></a></h2>
<p>The COCO dataset is available for free download:</p>
<p>Images:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://images.cocodataset.org/zips/train2017.zip">train images</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/zips/val2017.zip">val images</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/zips/test2017.zip">test images</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/zips/unlabeled2017.zip">unlabeled images</a></p></li>
</ul>
<p>Annotations:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://images.cocodataset.org/annotations/annotations_trainval2017.zip">captions</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/annotations/image_info_test2017.zip">image_info</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/annotations/annotations_trainval2017.zip">instances</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/annotations/panoptic_annotations_trainval2017.zip">panoptic</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/annotations/annotations_trainval2017.zip">person_keypoints</a></p></li>
<li><p><a class="reference external" href="http://images.cocodataset.org/annotations/stuff_annotations_trainval2017.zip">stuff</a></p></li>
</ul>
<p>A Datumaro project with a COCO source can be created in the following way:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create
datum import --format coco &lt;path/to/dataset&gt;
</pre></div>
</div>
<p>It is possible to specify project name and project directory. Run
<code class="docutils literal notranslate"><span class="pre">datum</span> <span class="pre">create</span> <span class="pre">--help</span></code> for more information.</p>
<p>Extra options for adding a source in the COCO format:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--keep-original-category-ids</span></code>: Add dummy label categories so that
category indexes in the imported data source correspond to the category IDs
in the original annotation file.</p></li>
</ul>
<p>A COCO dataset directory should have the following structure:</p>
<!--lint disable fenced-code-flag-->
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└─ Dataset/
    ├── dataset_meta.json # a list of custom labels (optional)
    ├── images/
    │   ├── train/
    │   │   ├── &lt;image_name1.ext&gt;
    │   │   ├── &lt;image_name2.ext&gt;
    │   │   └── ...
    │   └── val/
    │       ├── &lt;image_name1.ext&gt;
    │       ├── &lt;image_name2.ext&gt;
    │       └── ...
    └── annotations/
        ├── &lt;task&gt;_&lt;subset_name&gt;.json
        └── ...
</pre></div>
</div>
<p>For the panoptic task, a dataset directory should have the following structure:</p>
<!--lint disable fenced-code-flag-->
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└─ Dataset/
    ├── dataset_meta.json # a list of custom labels (optional)
    ├── images/
    │   ├── train/
    │   │   ├── &lt;image_name1.ext&gt;
    │   │   ├── &lt;image_name2.ext&gt;
    │   │   └── ...
    │   ├── val/
    │   │   ├── &lt;image_name1.ext&gt;
    │   │   ├── &lt;image_name2.ext&gt;
    │   │   └── ...
    └── annotations/
        ├── panoptic_train/
        │   ├── &lt;image_name1.ext&gt;
        │   ├── &lt;image_name2.ext&gt;
        │   └── ...
        ├── panoptic_train.json
        ├── panoptic_val/
        │   ├── &lt;image_name1.ext&gt;
        │   ├── &lt;image_name2.ext&gt;
        │   └── ...
        └── panoptic_val.json
</pre></div>
</div>
<p>Annotation files must have the names like <code class="docutils literal notranslate"><span class="pre">&lt;task_name&gt;_&lt;subset_name&gt;.json</span></code>.
The year is treated as a part of the subset name.
If the annotation file name does’t match this pattern, use one of the
task-specific formats instead of plain <code class="docutils literal notranslate"><span class="pre">coco</span></code>: <code class="docutils literal notranslate"><span class="pre">coco_captions</span></code>,
<code class="docutils literal notranslate"><span class="pre">coco_image_info</span></code>, <code class="docutils literal notranslate"><span class="pre">coco_instances</span></code>, <code class="docutils literal notranslate"><span class="pre">coco_labels</span></code>, <code class="docutils literal notranslate"><span class="pre">coco_panoptic</span></code>,
<code class="docutils literal notranslate"><span class="pre">coco_person_keypoints</span></code>, <code class="docutils literal notranslate"><span class="pre">coco_stuff</span></code>. In this case all items of the
dataset will be added to the <code class="docutils literal notranslate"><span class="pre">default</span></code> subset.</p>
<p>To add custom classes, you can use <a class="reference external" href="/docs/user-manual/supported_formats/#dataset-meta-file"><code class="docutils literal notranslate"><span class="pre">dataset_meta.json</span></code></a>.</p>
<p>You can import a dataset for one or several tasks
instead of the whole dataset. This option also allows to import annotation
files with non-default names. For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create
datum import --format coco_stuff -r &lt;relpath/to/stuff.json&gt; &lt;path/to/dataset&gt;
</pre></div>
</div>
<p>To make sure that the selected dataset has been added to the project, you can
run <code class="docutils literal notranslate"><span class="pre">datum</span> <span class="pre">project</span> <span class="pre">info</span></code>, which will display the project information.</p>
<p>Notes:</p>
<ul class="simple">
<li><p>COCO categories can have any integer ids, however, Datumaro will count
annotation category id 0 as “not specified”. This does not contradict
the original annotations, because they have category indices starting from 1.</p></li>
</ul>
</section>
<section id="export-to-other-formats">
<h2>Export to other formats<a class="headerlink" href="#export-to-other-formats" title="Permalink to this headline"></a></h2>
<p>Datumaro can convert COCO dataset into any other format <a class="reference internal" href="../user-manual/supported_formats.html"><span class="doc std std-doc">Datumaro supports</span></a>.
To get the expected result, convert the dataset to formats
that support the specified task (e.g. for panoptic segmentation - VOC, CamVID)</p>
<p>There are several ways to convert a COCO dataset to other dataset formats
using CLI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create
datum import -f coco &lt;path/to/coco&gt;
datum <span class="nb">export</span> -f voc -o &lt;output/dir&gt;
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum convert -if coco -i &lt;path/to/coco&gt; -f voc -o &lt;output/dir&gt;
</pre></div>
</div>
<p>Or, using Python API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datumaro.components.dataset</span> <span class="kn">import</span> <span class="n">Dataset</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">import_from</span><span class="p">(</span><span class="s1">&#39;&lt;path/to/dataset&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;coco&#39;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s1">&#39;save_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;voc&#39;</span><span class="p">,</span> <span class="n">save_images</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="export-to-coco">
<h2>Export to COCO<a class="headerlink" href="#export-to-coco" title="Permalink to this headline"></a></h2>
<p>There are several ways to convert a dataset to COCO format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># export dataset into COCO format from existing project</span>
datum <span class="nb">export</span> -p &lt;path/to/project&gt; -f coco -o &lt;output/dir&gt; <span class="se">\</span>
    -- --save-images
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># converting to COCO format from other format</span>
datum convert -if voc -i &lt;path/to/dataset&gt; <span class="se">\</span>
    -f coco -o &lt;output/dir&gt; -- --save-images
</pre></div>
</div>
<p>Extra options for exporting to COCO format:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--save-images</span></code> allow to export dataset with saving images
(by default <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--image-ext</span> <span class="pre">IMAGE_EXT</span></code> allow to specify image extension
for exporting dataset (by default - keep original or use <code class="docutils literal notranslate"><span class="pre">.jpg</span></code>, if none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--save-dataset-meta</span></code> - allow to export dataset with saving dataset meta
file (by default <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--segmentation-mode</span> <span class="pre">MODE</span></code> allow to specify save mode for instance
segmentation:</p>
<ul>
<li><p>‘guess’: guess the mode for each instance
(using ‘is_crowd’ attribute as hint)</p></li>
<li><p>‘polygons’: save polygons (merge and convert masks, prefer polygons)</p></li>
<li><p>‘mask’: save masks (merge and convert polygons, prefer masks)
(by default <code class="docutils literal notranslate"><span class="pre">guess</span></code>)</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">--crop-covered</span></code> allow to crop covered segments so that background objects
segmentation was more accurate (by default <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--allow-attributes</span> <span class="pre">ALLOW_ATTRIBUTES</span></code> allow export of attributes
(by default <code class="docutils literal notranslate"><span class="pre">True</span></code>). The parameter enables or disables writing
the custom annotation attributes to the “attributes” annotation
field. This field is an extension to the original COCO format</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--reindex</span> <span class="pre">REINDEX</span></code> allow to assign new indices to images and annotations,
useful to avoid merge conflicts (by default <code class="docutils literal notranslate"><span class="pre">False</span></code>).
This option allows to control if the images and
annotations must be given new indices. It can be useful, when
you want to preserve the original indices in the produced dataset.
Consider having this option enabled when converting from other formats
or merging datasets to avoid conflicts</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--merge-images</span></code> allow to save all images into a single directory
(by default <code class="docutils literal notranslate"><span class="pre">False</span></code>). The parameter controls the output directory for
images. When enabled, the dataset images are saved into a single
directory, otherwise they are saved in separate directories by subsets.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--tasks</span> <span class="pre">TASKS</span></code> allow to specify tasks for export dataset,
by default Datumaro uses all tasks. Example:</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create
datum import -f coco &lt;path/to/dataset&gt;
datum <span class="nb">export</span> -f coco -- --tasks instances,stuff
</pre></div>
</div>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"></a></h2>
<p>Datumaro supports filtering, transformation, merging etc. for all formats
and for the COCO format in particular. Follow the
<span class="xref myst">user manual</span>
to get more information about these operations.</p>
<p>There are several examples of using Datumaro operations to solve
particular problems with a COCO dataset:</p>
<section id="example-1-how-to-load-an-original-panoptic-coco-dataset-and-convert-to-pascal-voc">
<h3>Example 1. How to load an original panoptic COCO dataset and convert to Pascal VOC<a class="headerlink" href="#example-1-how-to-load-an-original-panoptic-coco-dataset-and-convert-to-pascal-voc" title="Permalink to this headline"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create -o project
datum import -p project -f coco_panoptic ./COCO/annotations/panoptic_val2017.json
datum stats -p project
datum <span class="nb">export</span> -p project -f voc -- --save-images
</pre></div>
</div>
</section>
<section id="example-2-how-to-create-custom-coco-like-dataset">
<h3>Example 2. How to create custom COCO-like dataset<a class="headerlink" href="#example-2-how-to-create-custom-coco-like-dataset" title="Permalink to this headline"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">datumaro.components.annotation</span> <span class="kn">import</span> <span class="n">Mask</span>
<span class="kn">from</span> <span class="nn">datumaro.components.dataset</span> <span class="kn">import</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="nn">datumaro.components.extractor</span> <span class="kn">import</span> <span class="n">DatasetItem</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span>
  <span class="n">DatasetItem</span><span class="p">(</span><span class="nb">id</span><span class="o">=</span><span class="s1">&#39;000000000001&#39;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span>
    <span class="n">subset</span><span class="o">=</span><span class="s1">&#39;val&#39;</span><span class="p">,</span>
    <span class="n">attributes</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">},</span>
    <span class="n">annotations</span><span class="o">=</span><span class="p">[</span>
      <span class="n">Mask</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]),</span> <span class="n">label</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_crowd&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">}),</span>
      <span class="n">Mask</span><span class="p">(</span><span class="n">image</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]),</span> <span class="n">label</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="nb">id</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">group</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;is_crowd&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}),</span>
    <span class="p">]</span>
  <span class="p">),</span>
<span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s1">&#39;./dataset&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;coco_panoptic&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Examples of using this format from the code can be found in
<a class="reference external" href="https://github.com/openvinotoolkit/datumaro/tree/develop/tests/test_coco_format.py">the format tests</a></p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="cityscapes.html" class="btn btn-neutral float-left" title="Cityscapes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="icdar.html" class="btn btn-neutral float-right" title="ICDAR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
  <p>
      &#169; Copyright 2021, Intel.<div>
      <small><a href="https://www.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">Privacy Policy</a></small>
      |
      <small><a href="https://www.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Use</a></small>
    </div>
    <br/>
    <small>
      Intel technologies may require enabled hardware, software or service activation. // No product or component can be absolutely secure. // Your costs and results may vary. // Performance varies by use, configuration and other factors. // See our complete legal <u><a href="https://edc.intel.com/content/www/us/en/products/performance/benchmarks/overview/?r=219444055">Notices and Disclaimers</a></u>. // Intel is committed to respecting human rights and avoiding complicity in human rights abuses. See Intel’s <a href="https://www.intel.com/content/www/us/en/policy/policy-human-rights.html"><u>Global Human Rights Principles</u></a>. Intel’s products and software are intended only to be used in applications that do not cause or contribute to a violation of an internationally recognized human right.
    </small>
  </p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>