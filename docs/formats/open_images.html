<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Open Images &mdash; Datumaro Documentation 0.2.2 documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Pascal VOC" href="pascal_voc.html" />
    <link rel="prev" title="MPII Human Pose Dataset (JSON)" href="mpii_json.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #30638E" >
  <a href="../../index.html" class="icon"> Datumaro Documentation
</a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Datumaro Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-manual/user-manual.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developer_manual.html">Developer manual</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="formats.html">Formats</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="ade20k2017.html">ADE20k (v2017)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ade20k2020.html">ADE20k (v2020)</a></li>
<li class="toctree-l2"><a class="reference internal" href="align_celeba.html">Align CelebA</a></li>
<li class="toctree-l2"><a class="reference internal" href="celeba.html">CelebA</a></li>
<li class="toctree-l2"><a class="reference internal" href="cifar.html">CIFAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="cityscapes.html">Cityscapes</a></li>
<li class="toctree-l2"><a class="reference internal" href="coco.html">COCO</a></li>
<li class="toctree-l2"><a class="reference internal" href="icdar.html">ICDAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="image_zip.html">Image zip</a></li>
<li class="toctree-l2"><a class="reference internal" href="imagenet.html">ImageNet</a></li>
<li class="toctree-l2"><a class="reference internal" href="kitti.html">KITTI</a></li>
<li class="toctree-l2"><a class="reference internal" href="kitti_raw.html">Velodyne Points / KITTI Raw 3D</a></li>
<li class="toctree-l2"><a class="reference internal" href="lfw.html">LFW</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapillary_vistas.html">Mapillary Vistas</a></li>
<li class="toctree-l2"><a class="reference internal" href="market1501.html">Market-1501</a></li>
<li class="toctree-l2"><a class="reference internal" href="mars.html">MARS</a></li>
<li class="toctree-l2"><a class="reference internal" href="mnist.html">MNIST</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpii.html">MPII Human Pose Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="mpii_json.html">MPII Human Pose Dataset (JSON)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Open Images</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#format-specification">Format specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#import-open-images-dataset">Import Open Images dataset</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-an-image-metadata-file">Creating an image metadata file</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#export-to-other-formats">Export to other formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-to-open-images">Export to Open Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#example-1-load-the-open-images-dataset-and-convert-to-the-cvat-format">Example 1. Load the Open Images dataset and convert to the CVAT format</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example-2-create-a-custom-oid-like-dataset">Example 2. Create a custom OID-like dataset</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pascal_voc.html">Pascal VOC</a></li>
<li class="toctree-l2"><a class="reference internal" href="sly_pointcloud.html">Supervisely Point Cloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthia.html">SYNTHIA</a></li>
<li class="toctree-l2"><a class="reference internal" href="vgg_face2.html">Vgg Face2 CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="vott_csv.html">VoTT CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="vott_json.html">VoTT JSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html">Format specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html#import-wider-face-dataset">Import WIDER Face dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html#export-wider-face-dataset">Export WIDER Face dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="wider_face.html#export-to-wider-face-dataset">Export to WIDER Face dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="yolo.html">YOLO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../plugins/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/cli/cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/components/components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/plugins/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/util/util/util.html">Utilities</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #30638E" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Datumaro Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="formats.html">Formats</a> &raquo;</li>
      <li>Open Images</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/docs/formats/open_images.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="open-images">
<h1>Open Images<a class="headerlink" href="#open-images" title="Permalink to this headline"></a></h1>
<section id="format-specification">
<h2>Format specification<a class="headerlink" href="#format-specification" title="Permalink to this headline"></a></h2>
<p>A description of the Open Images Dataset (OID) format is available
<a class="reference external" href="https://storage.googleapis.com/openimages/web/download.html">here</a>.
Datumaro supports versions 4, 5 and 6.</p>
<p>Supported annotation types:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Label</span></code> (human-verified image-level labels)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Bbox</span></code> (bounding boxes)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Mask</span></code> (segmentation masks)</p></li>
</ul>
<p>Supported annotation attributes:</p>
<ul class="simple">
<li><p>Labels</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">score</span></code> (read/write, float).
The confidence level from 0 to 1.
A score of 0 indicates that
the image does not contain objects of the corresponding class.</p></li>
</ul>
</li>
<li><p>Bounding boxes</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">score</span></code> (read/write, float).
The confidence level from 0 to 1.
In the original dataset this is always equal to 1,
but custom datasets may be created with arbitrary values.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">occluded</span></code> (read/write, boolean).
Whether the object is occluded by another object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">truncated</span></code> (read/write, boolean).
Whether the object extends beyond the boundary of the image.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_group_of</span></code> (read/write, boolean).
Whether the object represents a group of objects of the same class.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_depiction</span></code> (read/write, boolean).
Whether the object is a depiction (such as a drawing)
rather than a real object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">is_inside</span></code> (read/write, boolean).
Whether the object is seen from the inside.</p></li>
</ul>
</li>
<li><p>Masks</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">box_id</span></code> (read/write, string).
An identifier for the bounding box associated with the mask.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">predicted_iou</span></code> (read/write, float).
Predicted IoU value with respect to the ground truth.</p></li>
</ul>
</li>
</ul>
</section>
<section id="import-open-images-dataset">
<h2>Import Open Images dataset<a class="headerlink" href="#import-open-images-dataset" title="Permalink to this headline"></a></h2>
<p>The Open Images dataset is available for free download.</p>
<p>See the <a class="reference external" href="https://github.com/cvdfoundation/open-images-dataset"><code class="docutils literal notranslate"><span class="pre">open-images-dataset</span></code> GitHub repository</a>
for information on how to download the images.</p>
<p>Datumaro also requires the image description files,
which can be downloaded from the following URLs:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/2018_04/image_ids_and_rotation.csv">complete set</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v6/oidv6-train-images-with-labels-with-rotation.csv">train set</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/2018_04/validation/validation-images-with-rotation.csv">validation set</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/2018_04/test/test-images-with-rotation.csv">test set</a></p></li>
</ul>
<p>In addition, the following metadata file must be present
in the <code class="docutils literal notranslate"><span class="pre">annotations</span></code> directory:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v6/oidv6-class-descriptions.csv">class descriptions</a></p></li>
</ul>
<p>You can optionally download the following additional metadata file:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/2018_04/bbox_labels_600_hierarchy.json">class hierarchy</a></p></li>
</ul>
<p>Annotations can be downloaded from the following URLs:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v6/oidv6-train-annotations-human-imagelabels.csv">train image labels</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-annotations-human-imagelabels.csv">validation image labels</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-annotations-human-imagelabels.csv">test image labels</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v6/oidv6-train-annotations-bbox.csv">train bounding boxes</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-annotations-bbox.csv">validation bounding boxes</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-annotations-bbox.csv">test bounding boxes</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-annotations-object-segmentation.csv">train segmentation masks (metadata)</a></p></li>
<li><p>train segmentation masks (images):
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-0.zip">0</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-1.zip">1</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-2.zip">2</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-3.zip">3</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-4.zip">4</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-5.zip">5</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-6.zip">6</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-7.zip">7</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-8.zip">8</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-9.zip">9</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-a.zip">a</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-b.zip">b</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-c.zip">c</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-d.zip">d</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-e.zip">e</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/train-masks/train-masks-f.zip">f</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-annotations-object-segmentation.csv">validation segmentation masks (metadata)</a></p></li>
<li><p>validation segmentation masks (images):
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-0.zip">0</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-1.zip">1</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-2.zip">2</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-3.zip">3</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-4.zip">4</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-5.zip">5</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-6.zip">6</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-7.zip">7</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-8.zip">8</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-9.zip">9</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-a.zip">a</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-b.zip">b</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-c.zip">c</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-d.zip">d</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-e.zip">e</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/validation-masks/validation-masks-f.zip">f</a></p></li>
<li><p><a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-annotations-object-segmentation.csv">test segmentation masks (metadata)</a></p></li>
<li><p>test segmentation masks (images):
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-0.zip">0</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-1.zip">1</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-2.zip">2</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-3.zip">3</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-4.zip">4</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-5.zip">5</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-6.zip">6</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-7.zip">7</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-8.zip">8</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-9.zip">9</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-a.zip">a</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-b.zip">b</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-c.zip">c</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-d.zip">d</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-e.zip">e</a>
<a class="reference external" href="https://storage.googleapis.com/openimages/v5/test-masks/test-masks-f.zip">f</a></p></li>
</ul>
<p>All annotation files are optional,
except that if the mask metadata files for a given subset are downloaded,
all corresponding images must be downloaded as well, and vice versa.</p>
<p>A Datumaro project with an OID source can be created in the following way:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create
datum import --format open_images &lt;path/to/dataset&gt;
</pre></div>
</div>
<p>It is possible to specify project name and project directory. Run
<code class="docutils literal notranslate"><span class="pre">datum</span> <span class="pre">create</span> <span class="pre">--help</span></code> for more information.</p>
<p>Open Images dataset directory should have the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>└─ Dataset/
    ├── dataset_meta.json # a list of custom labels (optional)
    ├── annotations/
    │   └── bbox_labels_600_hierarchy.json
    │   └── image_ids_and_rotation.csv  # optional
    │   └── oidv6-class-descriptions.csv
    │   └── *-annotations-bbox.csv
    │   └── *-annotations-human-imagelabels.csv
    │   └── *-annotations-object-segmentation.csv
    ├── images/
    |   ├── test/
    |   │   ├── &lt;image_name1.jpg&gt;
    |   │   ├── &lt;image_name2.jpg&gt;
    |   │   └── ...
    |   ├── train/
    |   │   ├── &lt;image_name1.jpg&gt;
    |   │   ├── &lt;image_name2.jpg&gt;
    |   │   └── ...
    |   └── validation/
    |       ├── &lt;image_name1.jpg&gt;
    |       ├── &lt;image_name2.jpg&gt;
    |       └── ...
    └── masks/
        ├── test/
        │   ├── &lt;mask_name1.png&gt;
        │   ├── &lt;mask_name2.png&gt;
        │   └── ...
        ├── train/
        │   ├── &lt;mask_name1.png&gt;
        │   ├── &lt;mask_name2.png&gt;
        │   └── ...
        └── validation/
            ├── &lt;mask_name1.png&gt;
            ├── &lt;mask_name2.png&gt;
            └── ...
</pre></div>
</div>
<p>The mask images must be extracted from the ZIP archives linked above.</p>
<p>To use per-subset image description files instead of <code class="docutils literal notranslate"><span class="pre">image_ids_and_rotation.csv</span></code>,
place them in the <code class="docutils literal notranslate"><span class="pre">annotations</span></code> subdirectory.</p>
<p>To add custom classes, you can use <a class="reference external" href="/docs/user-manual/supported_formats/#dataset-meta-file"><code class="docutils literal notranslate"><span class="pre">dataset_meta.json</span></code></a>.</p>
<section id="creating-an-image-metadata-file">
<h3>Creating an image metadata file<a class="headerlink" href="#creating-an-image-metadata-file" title="Permalink to this headline"></a></h3>
<p>To load bounding box and segmentation mask annotations,
Datumaro needs to know the sizes of the corresponding images.
By default, it will determine these sizes by loading each image from disk,
which requires the images to be present and makes the loading process slow.</p>
<p>If you want to load the aforementioned annotations on a machine where
the images are not available,
or just to speed up the dataset loading process,
you can extract the image size information in advance
and record it in an image metadata file.
This file must be placed at <code class="docutils literal notranslate"><span class="pre">annotations/images.meta</span></code>,
and must contain one line per image, with the following structure:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;ID&gt; &lt;height&gt; &lt;width&gt;
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">&lt;ID&gt;</span></code> is the file name of the image without the extension,
and <code class="docutils literal notranslate"><span class="pre">&lt;height&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;width&gt;</span></code> are the dimensions of that image.
<code class="docutils literal notranslate"><span class="pre">&lt;ID&gt;</span></code> may be quoted with either single or double quotes.</p>
<p>The image metadata file, if present, will be used to determine the image
sizes without loading the images themselves.</p>
<p>Here’s one way to create the <code class="docutils literal notranslate"><span class="pre">images.meta</span></code> file using ImageMagick,
assuming that the images are present on the current machine:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># run this from the dataset directory</span>
find images -name <span class="s1">&#39;*.jpg&#39;</span> -exec <span class="se">\</span>
    identify -format <span class="s1">&#39;&quot;%[basename]&quot; %[height] %[width]\n&#39;</span> <span class="o">{}</span> + <span class="se">\</span>
    &gt; annotations/images.meta
</pre></div>
</div>
</section>
</section>
<section id="export-to-other-formats">
<h2>Export to other formats<a class="headerlink" href="#export-to-other-formats" title="Permalink to this headline"></a></h2>
<p>Datumaro can convert OID into any other format <a class="reference internal" href="../user-manual/supported_formats.html"><span class="doc std std-doc">Datumaro supports</span></a>.
To get the expected result, convert the dataset to a format
that supports image-level labels.
There are several ways to convert OID to other dataset formats:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create
datum import -f open_images &lt;path/to/open_images&gt;
datum <span class="nb">export</span> -f cvat -o &lt;output/dir&gt;
</pre></div>
</div>
<p>or</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum convert -if open_images -i &lt;path/to/open_images&gt; -f cvat -o &lt;output/dir&gt;
</pre></div>
</div>
<p>Or, using Python API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datumaro.components.dataset</span> <span class="kn">import</span> <span class="n">Dataset</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">import_from</span><span class="p">(</span><span class="s1">&#39;&lt;path/to/dataset&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;open_images&#39;</span><span class="p">)</span>
<span class="n">dataset</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s1">&#39;save_dir&#39;</span><span class="p">,</span> <span class="s1">&#39;cvat&#39;</span><span class="p">,</span> <span class="n">save_images</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="export-to-open-images">
<h2>Export to Open Images<a class="headerlink" href="#export-to-open-images" title="Permalink to this headline"></a></h2>
<p>There are several ways to convert an existing dataset to the Open Images format:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># export dataset into Open Images format from existing project</span>
datum <span class="nb">export</span> -p &lt;path/to/project&gt; -f open_images -o &lt;output/dir&gt; <span class="se">\</span>
  -- --save_images
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># convert a dataset in another format to the Open Images format</span>
datum convert -if imagenet -i &lt;path/to/dataset&gt; <span class="se">\</span>
    -f open_images -o &lt;output/dir&gt; <span class="se">\</span>
    -- --save-images
</pre></div>
</div>
<p>Extra options for exporting to the Open Images format:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--save-images</span></code> - save image files when exporting the dataset
(by default, <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--image-ext</span> <span class="pre">IMAGE_EXT</span></code> - save image files with the specified extension
when exporting the dataset (by default, uses the original extension
or <code class="docutils literal notranslate"><span class="pre">.jpg</span></code> if there isn’t one)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--save-dataset-meta</span></code> - allow to export dataset with saving dataset meta
file (by default <code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
</ul>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline"></a></h2>
<p>Datumaro supports filtering, transformation, merging etc. for all formats
and for the Open Images format in particular. Follow the
<span class="xref myst">user manual</span>
to get more information about these operations.</p>
<p>Here are a few examples of using Datumaro operations to solve
particular problems with the Open Images dataset:</p>
<section id="example-1-load-the-open-images-dataset-and-convert-to-the-cvat-format">
<h3>Example 1. Load the Open Images dataset and convert to the CVAT format<a class="headerlink" href="#example-1-load-the-open-images-dataset-and-convert-to-the-cvat-format" title="Permalink to this headline"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create -o project
datum import -p project -f open_images ./open-images-dataset/
datum stats -p project
datum <span class="nb">export</span> -p project -f cvat -- --save-images
</pre></div>
</div>
</section>
<section id="example-2-create-a-custom-oid-like-dataset">
<h3>Example 2. Create a custom OID-like dataset<a class="headerlink" href="#example-2-create-a-custom-oid-like-dataset" title="Permalink to this headline"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">datumaro.components.dataset</span> <span class="kn">import</span> <span class="n">Dataset</span>
<span class="kn">from</span> <span class="nn">datumaro.components.annotation</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">AnnotationType</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">LabelCategories</span><span class="p">,</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">datumaro.components.extractor</span> <span class="kn">import</span> <span class="n">DatasetItem</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">Dataset</span><span class="o">.</span><span class="n">from_iterable</span><span class="p">([</span>
  <span class="n">DatasetItem</span><span class="p">(</span>
    <span class="nb">id</span><span class="o">=</span><span class="s1">&#39;0000000000000001&#39;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">)),</span>
    <span class="n">subset</span><span class="o">=</span><span class="s1">&#39;validation&#39;</span><span class="p">,</span>
    <span class="n">annotations</span><span class="o">=</span><span class="p">[</span>
      <span class="n">Label</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}),</span>
      <span class="n">Label</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">attributes</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;score&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}),</span>
    <span class="p">],</span>
  <span class="p">),</span>
<span class="p">],</span> <span class="n">categories</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;/m/0&#39;</span><span class="p">,</span> <span class="s1">&#39;/m/1&#39;</span><span class="p">])</span>

<span class="n">dataset</span><span class="o">.</span><span class="n">export</span><span class="p">(</span><span class="s1">&#39;./dataset&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;open_images&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Examples of using this format from the code can be found in
<a class="reference external" href="https://github.com/openvinotoolkit/datumaro/tree/develop/tests/test_open_images_format.py">the format tests</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="mpii_json.html" class="btn btn-neutral float-left" title="MPII Human Pose Dataset (JSON)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pascal_voc.html" class="btn btn-neutral float-right" title="Pascal VOC" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
  <p>
      &#169; Copyright 2021, Intel.<div>
      <small><a href="https://www.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">Privacy Policy</a></small>
      |
      <small><a href="https://www.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Use</a></small>
    </div>
    <br/>
    <small>
      Intel technologies may require enabled hardware, software or service activation. // No product or component can be absolutely secure. // Your costs and results may vary. // Performance varies by use, configuration and other factors. // See our complete legal <u><a href="https://edc.intel.com/content/www/us/en/products/performance/benchmarks/overview/?r=219444055">Notices and Disclaimers</a></u>. // Intel is committed to respecting human rights and avoiding complicity in human rights abuses. See Intel’s <a href="https://www.intel.com/content/www/us/en/policy/policy-human-rights.html"><u>Global Human Rights Principles</u></a>. Intel’s products and software are intended only to be used in applications that do not cause or contribute to a violation of an internationally recognized human right.
    </small>
  </p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>