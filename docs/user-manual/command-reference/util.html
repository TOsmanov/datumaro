<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Utilities &mdash; Datumaro Documentation 0.2.2 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
        <script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Validate Dataset" href="validate.html" />
    <link rel="prev" title="Transform Dataset" href="transform.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #30638E" >
  <a href="../../../index.html" class="icon"> Datumaro Documentation
</a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../design.html">Datumaro Design</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../user-manual.html">User Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../user-manual.html#user-manual">User Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../_index.html">User Manual</a></li>
<li class="toctree-l2"><a class="reference internal" href="../extending.html">Extending</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to_control_tm_data_collection.html">How to control telemetry data collection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../how_to_use_datumaro.html">How to use Datumaro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../links.html">Links</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media_formats.html">Media formats</a></li>
<li class="toctree-l2"><a class="reference internal" href="../supported_formats.html">Supported Formats</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="command-reference.html">Command Reference</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="command-reference.html#command-reference">Command reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="_index.html">Command reference</a></li>
<li class="toctree-l3"><a class="reference internal" href="checkout.html">Checkout</a></li>
<li class="toctree-l3"><a class="reference internal" href="commit.html">Commit</a></li>
<li class="toctree-l3"><a class="reference internal" href="convert.html">Convert datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="create.html">Create project</a></li>
<li class="toctree-l3"><a class="reference internal" href="detect-format.html">Detect dataset format</a></li>
<li class="toctree-l3"><a class="reference internal" href="diff.html">Compare datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="download.html">Download datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="explain.html">Run model inference explanation (explain)</a></li>
<li class="toctree-l3"><a class="reference internal" href="export.html">Export Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="filter.html">Filter datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="info.html">Print dataset info</a></li>
<li class="toctree-l3"><a class="reference internal" href="log.html">Log</a></li>
<li class="toctree-l3"><a class="reference internal" href="merge.html">Merge Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="models.html">Models</a></li>
<li class="toctree-l3"><a class="reference internal" href="patch.html">Patch Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="projects.html">Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="sources.html">Sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="stats.html">Get Project Statistics</a></li>
<li class="toctree-l3"><a class="reference internal" href="status.html">Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="transform.html">Transform Dataset</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Utilities</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#split-video-into-frames-a-id-split-video-a">Split video into frames <a id="split-video"></a></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="validate.html">Validate Dataset</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../developer_manual.html">Developer manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../formats/formats.html">Formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contribution Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">Release notes</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/cli/cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/components/components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/plugins/plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/util/util/util.html">Utilities</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #30638E" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Datumaro Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../user-manual.html">User Manual</a> &raquo;</li>
          <li><a href="command-reference.html">Command Reference</a> &raquo;</li>
      <li>Utilities</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/docs/user-manual/command-reference/util.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline"></a></h1>
<section id="split-video-into-frames-a-id-split-video-a">
<h2>Split video into frames <a id="split-video"></a><a class="headerlink" href="#split-video-into-frames-a-id-split-video-a" title="Permalink to this headline"></a></h2>
<p>Splits a video into separate frames and saves them in a directory.
After the splitting, the images can be added into a project using
the <a class="reference external" href="./sources/#source-import"><code class="docutils literal notranslate"><span class="pre">import</span></code> command</a> and the <code class="docutils literal notranslate"><span class="pre">image_dir</span></code> format.</p>
<p>This command is useful for making a dataset from a video file.
Unlike direct video reading during model training, which can produce
different results if the system environment changes, this command
allows to split the video into frames and use them instead, making
the dataset reproducible and stable.</p>
<p>This command provides different options like setting the frame step
(the <code class="docutils literal notranslate"><span class="pre">-s/--step</span></code> option), file name pattern (<code class="docutils literal notranslate"><span class="pre">-n/--name-pattern</span></code>),
starting (<code class="docutils literal notranslate"><span class="pre">-b/--start-frame</span></code>) and finishing (<code class="docutils literal notranslate"><span class="pre">-e/--end-frame</span></code>) frame etc.</p>
<p>Note that this command is equivalent to the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum create -o proj
datum import -p proj -f video_frames video.mp4 -- &lt;params&gt;
datum <span class="nb">export</span> -p proj -f image_dir -- &lt;params&gt;
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum util split_video <span class="o">[</span>-h<span class="o">]</span> -i SRC_PATH <span class="o">[</span>-o DST_DIR<span class="o">]</span> <span class="o">[</span>--overwrite<span class="o">]</span>
  <span class="o">[</span>-n NAME_PATTERN<span class="o">]</span> <span class="o">[</span>-s STEP<span class="o">]</span> <span class="o">[</span>-b START_FRAME<span class="o">]</span> <span class="o">[</span>-e END_FRAME<span class="o">]</span> <span class="o">[</span>-x IMAGE_EXT<span class="o">]</span>
</pre></div>
</div>
<p>Parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-i,</span> <span class="pre">--input-path</span></code> (string) - Path to the video file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-o,</span> <span class="pre">--output-dir</span></code> (string) - Output directory. By default, a subdirectory
in the current directory is used</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--overwrite</span></code> - Allows overwriting existing files in the output directory,
when it is not empty</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-n,</span> <span class="pre">--name-pattern</span></code> (string) - Name pattern for the produced
images (default: <code class="docutils literal notranslate"><span class="pre">%06d</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-s,</span> <span class="pre">--step</span></code> (integer) - Frame step (default: 1)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-b,</span> <span class="pre">--start-frame</span></code> (integer) - Starting frame (default: 0)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-e,</span> <span class="pre">--end-frame</span></code> (integer) - Finishing frame (default: none)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-x,</span> <span class="pre">--image-ext</span></code> (string) Output image extension (default: <code class="docutils literal notranslate"><span class="pre">.jpg</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-h,</span> <span class="pre">--help</span></code> - Print the help message and exit</p></li>
</ul>
<p>Example: split a video into frames, use each 30-rd frame:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum util split_video -i video.mp4 -o video.mp4-frames --step <span class="m">30</span>
</pre></div>
</div>
<p>Example: split a video into frames, save as ‘frame_xxxxxx.png’ files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum util split_video -i video.mp4 --image-ext<span class="o">=</span>.png --name-pattern<span class="o">=</span><span class="s1">&#39;frame_%%06d&#39;</span>
</pre></div>
</div>
<p>Example: split a video, add frames and annotations into dataset, export as YOLO:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>datum util split_video -i video.avi -o video-frames
datum create -o proj
datum import -p proj -f image_dir video-frames
datum import -p proj -f coco_instances annotations.json
datum <span class="nb">export</span> -p proj -f yolo -- --save-images
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="transform.html" class="btn btn-neutral float-left" title="Transform Dataset" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="validate.html" class="btn btn-neutral float-right" title="Validate Dataset" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
  <p>
      &#169; Copyright 2021, Intel.<div>
      <small><a href="https://www.intel.com/content/www/us/en/privacy/intel-privacy-notice.html">Privacy Policy</a></small>
      |
      <small><a href="https://www.intel.com/content/www/us/en/legal/terms-of-use.html">Terms of Use</a></small>
    </div>
    <br/>
    <small>
      Intel technologies may require enabled hardware, software or service activation. // No product or component can be absolutely secure. // Your costs and results may vary. // Performance varies by use, configuration and other factors. // See our complete legal <u><a href="https://edc.intel.com/content/www/us/en/products/performance/benchmarks/overview/?r=219444055">Notices and Disclaimers</a></u>. // Intel is committed to respecting human rights and avoiding complicity in human rights abuses. See Intel’s <a href="https://www.intel.com/content/www/us/en/policy/policy-human-rights.html"><u>Global Human Rights Principles</u></a>. Intel’s products and software are intended only to be used in applications that do not cause or contribute to a violation of an internationally recognized human right.
    </small>
  </p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>